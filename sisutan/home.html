<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
  <title>しすたん±</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;500;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
<link rel="icon" href="/icon.png" type="image/png" sizes="192x192">
<link rel="apple-touch-icon" href="/icon.png">

<link rel="manifest" href="/manifest.json">
<meta name="theme-color" content="#4f46e5">
  <link rel="manifest" href="/manifest.json">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="theme-color" content="#4f46e5">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-title" content="しすたん±">

  <style>
    body { font-family: 'Noto Sans JP', sans-serif; }

    nav .flex { white-space: nowrap; }
    nav a { white-space: nowrap; }

    @media (max-width: 768px) {
      .logo-text { display: none !important; }
      nav .flex { justify-content: space-between; gap: 8px; }
      nav a { font-size: 0.95rem; white-space: nowrap; }

      .btn {
        white-space: nowrap !important;
        overflow: hidden;
        text-overflow: ellipsis;
        font-size: 1.1rem !important;
        padding: 1.25rem 1.5rem !important;
        min-height: 64px;
        max-width: 100%;
      }

      .flex.flex-col.sm\:flex-row {
        flex-direction: column !important;
        gap: 16px !important;
      }
    }
  </style>
</head>
<body class="bg-gray-50 min-h-screen">

  <nav class="bg-white shadow sticky top-0 z-50">
    <div class="max-w-6xl mx-auto px-4 py-4 flex items-center justify-between">
      <div class="flex items-center gap-3">
        <img src="icon.png" alt="アイコン" class="w-10 h-10 object-contain">
        <h1 class="text-2xl sm:text-3xl font-bold text-indigo-700 logo-text">しすたん±</h1>
      </div>
      <div class="flex gap-4 sm:gap-10 text-base sm:text-lg font-medium">
        <a href="home.html" class="text-indigo-600 font-bold">ほーむ</a>
        <a href="all.html" class="hover:text-indigo-600">単語りすと</a>
        <a href="test.html" class="hover:text-indigo-600">小てすと</a>
      </div>
    </div>
  </nav>

  <div class="max-w-6xl mx-auto px-6 py-20 text-center">
    <h2 class="text-6xl font-bold mb-6">シス単勉強<br>おすすめは<br>1時間前漬け</h2>
<p class="text-xl text-gray-600 mt-8">
  完全無料広告なしの学生用<br>
  総閲覧回数: <span id="viewCount"></span> 回
</p>

<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.14.1/firebase-app.js";
  import { getDatabase, ref, runTransaction, onValue } from "https://www.gstatic.com/firebasejs/10.14.1/firebase-database.js";

  const firebaseConfig = {
    apiKey: "AIzaSyBWppYyitb80cSGXfQNLYANahv5B38bI0o",
    authDomain: "yuviewers.firebaseapp.com",
    databaseURL: "https://yuviewers-default-rtdb.firebaseio.com",
    projectId: "yuviewers",
    storageBucket: "yuviewers.firebasestorage.app",
    messagingSenderId: "821528905908",
    appId: "1:821528905908:web:b8ba777784444f8a986fe1"
  };

  const app = initializeApp(firebaseConfig);
  const db = getDatabase(app);

  const viewsRef = ref(db, 'page_views/home');

  runTransaction(viewsRef, (current) => {
    return (current || 0) + 1;
  }).then((result) => {
    console.log("成功:", result.snapshot.val());
  }).catch((error) => {
    console.error("失敗:", error);
  });

  onValue(viewsRef, (snapshot) => {
    const countElement = document.getElementById('viewCount');
    const value = snapshot.val();
    countElement.textContent = value !== null ? value : 0;
    console.log("最新カウント取得:", value); //デバッグ
  }, {
    onlyOnce: false
  });
</script>
    <br>
    <div class="flex flex-col sm:flex-row justify-center gap-6 sm:gap-8">
      <a href="all.html" class="btn bg-white text-indigo-700 border-2 border-indigo-600 font-bold px-10 py-6 rounded-3xl text-2xl hover:bg-indigo-50 transition">
        単語りすと
      </a>
      <a href="test.html" class="btn bg-gradient-to-r from-indigo-600 to-purple-600 text-white font-bold px-10 py-6 rounded-3xl text-2xl hover:scale-105 transition">
        小てすと
      </a>
    </div>
  </div>
</div>
  <script>
    function hideLogoOnMobile() {
      const logo = document.querySelector('.logo-text');
      if (logo && (window.innerWidth <= 768 || window.matchMedia('(display-mode: standalone)').matches)) {
        logo.style.display = 'none';
      }
    }

    window.addEventListener('load', hideLogoOnMobile);
    window.addEventListener('resize', hideLogoOnMobile);
    window.addEventListener('DOMContentLoaded', hideLogoOnMobile);
    setTimeout(hideLogoOnMobile, 500);
  </script>
</body>
</html>
